# Цель: получить практический опыт работы c Docker-командами


### Задание 1: 
#### Запуск контейнера с использованием docker run

Цель этого задания - запустить контейнер с использованием команды docker
run и ознакомиться с ее основными параметрами.

Шаги:
● Найдите на Docker Hub образ, который вы хотите запустить на вашей
машине.
● Используя команду docker run, запустите контейнер на основе этого
образа. Добавьте флаги, чтобы установить имя контейнера,
перенаправить порты, установить переменные окружения и т.д.

```
mkdir mysql_data && cd mysql_data

docker run --name mysql_bd -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:8.0.43-debian

```
https://hub.docker.com/_/mysql/tags
`8.0.43-debian` - tag for debian

Используйте команду docker ps, чтобы убедиться, что контейнер
запущен.

```
docker ps
CONTAINER ID   IMAGE                 COMMAND                  CREATED              STATUS              PORTS                 NAMES
483909523d9a   mysql:8.0.43-debian   "docker-entrypoint.s…"   About a minute ago   Up About a minute   3306/tcp, 33060/tcp   mysql_bd

```
● Остановите контейнер, используя команду docker stop, и удалите его,
используя команду docker rm.

```
docker stop 483909523d9a
docker rm 483909523d9a
```
or without command stop
```
docker rm 483909523d9a -f
```

### Задание 2: 
#### Оптимизация использования дискового пространства

Цель этого задания - ознакомиться с командами docker inspect, docker images
и docker system prune, и использовать их для оптимизации использования
дискового пространства на вашем хосте.

Шаги:
● Используя команду docker images, выведите список всех образов,
установленных на вашем хосте.
```
docker images
REPOSITORY    TAG             IMAGE ID       CREATED          SIZE
cmd-ex        latest          341bef6cf817   31 minutes ago   119MB
my-app        3.0             deb1a8174872   41 hours ago     506MB
my-app        1.0             1377c4f3a8af   41 hours ago     506MB
my-app        2.0             1377c4f3a8af   41 hours ago     506MB
<none>        <none>          50865de2052e   42 hours ago     506MB
postgres      latest          ca95f67ffb26   5 days ago       454MB

```

● Используя команду docker inspect, выведите информацию о размере
каждого образа и его слоях. Найдите образы, которые занимают много
места на диске, и определите, какие слои образа занимают больше
всего места.
```
docker inspect postgres
```
```
 docker images | awk 'NR>1{print $3}' | xargs -n 1 docker inspect | grep -i size
        "Size": 119175212,
        "Size": 505559886,
        "Size": 505560154,
        "Size": 505560154,
        "Size": 505560129,
        "Size": 454262587,
        "Size": 192385800,
        "Size": 10072,
        "Size": 610711873,

```

● Если вы обнаружили образы, которые больше не нужны, удалите их,
используя команду docker rmi.
```
docker rmi 50865de2052e
Deleted: sha256:50865de2052e33f255213fd4702ee78730edbba45fbe2a46a6627e6b23cc2be0

```
● Используйте команду docker system prune для удаления ненужных
образов, контейнеров, томов и сетей, которые больше не используются
вашими приложениями.
```
 docker system prune --all
WARNING! This will remove:
  - all stopped containers
  - all networks not used by at least one container
  - all images without at least one container associated to them
  - all build cache

Are you sure you want to continue? [y/N] y

```

● После выполнения этих действий проверьте использование дискового
пространства на вашем хосте и убедитесь, что вы освободили
достаточно места.

```
Deleted build cache objects:
tph4qznat8umta72x90b2lxa5
yyvrrey1z3zd00582m348f4yk
3b1b836xh7dzpum9cecodf88y

Total reclaimed space: 1.68GB
```
`docker system prune --all --volumes`

```
WARNING! This will remove:
  - all stopped containers
  - all networks not used by at least one container
  - all anonymous volumes not used by at least one container
  - all images without at least one container associated to them
  - all build cache

Are you sure you want to continue? [y/N] y
Deleted Volumes:
978d4f82fa8846aa2c0a1b98bfaa71ce36b380bef794b6490de752d923a4ba7f
b47fa403a74c8fd3e6cba4b77037360e38cda10dcb249163cfb2b9ddfc1a86ae
db02f4c05427ca94803e94cccac3b31fc24bf015b70d3b645fe24744660cf018

Total reclaimed space: 237.3MB

```