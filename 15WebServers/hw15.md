Задание 1:

Установите и настройте Nginx. Создайте html-страничку, где будет указана
ваша фамилия и тема урока. 
Настройте конфигурацию nginx для отображения
страницы по ссылке http://tms.by


```
sudo apt update
sudo apt install nginx
sudo systemctl start nginx
```

```bash
sudo mkdir /var/www/tms

 /var/www/html/index.tms.html

```
index.tms.html
```html
<!DOCTYPE html>
<html>
	<head>
		<title>Nginx</title>
		<style>
			html { color-scheme: light dark; }
			body { width: 35em; margin: 0 auto;
			font-family: Tahoma, Verdana, Arial, sans-serif; }
		</style>
	</head>
	<body>
		<h1>Тапехин Алексей</h1>
		<h2>понятие web-сервера</h2>

	</body>
</html>
```

## Есть 2 варианта изменения конфигурации для запуска своего сайта


### 1.Скопирую конфигурацию для изменения под мой сайт
```
sudo cp  /etc/nginx/sites-available/default /etc/nginx/sites-available/tms
sudo vim /etc/nginx/sites-available/tms
```

В `tms` меняем конфигурацию на мой сайт
```
root /var/www/tms;
# Add index.php to the list if you are using PHP
index index.html index.htm index.tms.html;
```

### 2. Создам файл с конф без копирования

```
sudo vim /etc/nginx/sites-available/tms
```

```
server {
        listen 80;
        listen [::]:80;

        server_name tms.by www.tms.by;

        root /var/www/tms;
        index index.html index.tms.html;

        location / {
                try_files $uri $uri/ =404;
        }
}
```



## Проверка конфигурации
```
 sudo nginx -t
 
 
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful

```
Удаляем по дефолту симлинк и делаем свой симлинк 
```
sudo rm /etc/nginx/sites-enabled/default
sudo ln -sf /etc/nginx/sites-available/tms /etc/nginx/sites-enabled
```

Рестартуем службу
```
sudo systemctl restart nginx
sudo systemctl status nginx
```

```
whereis hosts
hosts: /etc/hosts /usr/share/man/man5/hosts.5.gz

sudo vim /etc/hosts
# added my ip
192.168.50.34   tms.by
```
Проверка

```
curl http://tms.by

<!DOCTYPE html>
<html>
        <head>
                <meta charset="UTF-8">
                <title>Nginx</title>
                <style>
                        html { color-scheme: light dark; }
                        body { width: 35em; margin: 0 auto;
                        font-family: Tahoma, Verdana, Arial, sans-serif; }
                </style>
        </head>
        <body>
                <h1>Тапехин Алексей</h1>
                <h2>понятие web-сервера</h2>

        </body>
</html>


```


Задание 2 (опционально)
# Настройте связку Nginx + Apache. Nginx выступает в качестве reverse proxy.

### Установка apache

```bash
sudo apt-get update
sudo apt-get install apache2
```
## Настройка связки Apache + Nginx

Делаю новую конфу nginx
```bash
sudo vim /etc/nginx/sites-available/proksi

```
Для пропускания на сервер апач через 80 порт nginx
```bash
server {
listen 80;
server_name tms.by;
location / {
                proxy_pass http://127.0.0.1:8080;
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For
                $proxy_add_x_forwarded_for;
        }
}
```
Рестарт
```bash
sudo systemctl stop apache2
sudo systemctl start apache2
sudo systemctl status apache2
```


#### Меняем в конфиге порт 80 на 8080
```bash
sudo vim /etc/apache2/port.conf

В Ubuntu конечный файл настройки (apache2.conf) расделён на несколько файлов, расположенных в разных поддиректориях. Подробней написано в комментариях файла apache2.conf.

       /etc/apache2/
       |-- apache2.conf
       |       `--  ports.conf
```

```
sudo systemctl stop apache2
sudo systemctl start apache2
sudo systemctl status apache2
```
```bash
sudo systemctl restart nginx
sudo systemctl status nginx
```

### Проверка

```html
 curl http://tms.by | head -10
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 10671  100 10<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
6<html xmlns="http://www.w3.org/1999/xhtml">
7  <!--
1    Modified from the Debian original for Ubuntu
     Last updated: 2022-03-22
     See: https://launchpad.net/bugs/1966004
   -->
   <head>
0     <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Apache2 Ubuntu Default Page: It works</title>


```

все работает.